<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
  <head>
    <title>Combining RSS feeds and Displaying them on Your Page with Javascript and PHP</title>
    <meta content='text/html; charset=utf-8' http-equiv='Content-Type' />
    <meta content=', webdev, rss, biofuels' name='keywords' />
    <meta content='Last night I was trying to do something that I thought would be pretty simple: display a bunch of recent weblog posts on one page. ' name='description' />
    <link href='/assets/css/reset.css' rel='stylesheet' type='text/css' />
    <link href='/assets/css/style.css' media='screen' rel='stylesheet' type='text/css' />
  </head>
  <body>
    <div id='main'>
      <div id='header'>
        <div class='logo'>
          <a href='/'>&laquo; unthinkingly</a>
        </div>
        <div id='nav'>
          <ul>
            <li><a href='/about.html'>about</a></li>
            <li><a href='/archives.html'>archives</a></li>
            <li><a href='/tags.html'>tags</a></li>
            <li>
              <a href='/atom.xml'>rss</a>
            </li>
            <li>
              <a href='/license.html'>license</a>
            </li>
          </ul>
        </div>
      </div>
      <div class='clear'></div>
      <div class='article'>
            <h1></h1>
            Combining RSS feeds and Displaying them on Your Page with Javascript and PHP
            <div class='meta'>
              <ul class='tags'>
                <li>Feb 24, 2006</li>
                <!-- disqus embed stuff was here -->
                <li>&middot;</li>
                <li>
                  <a class='tag' href='/tags/biofuels/'>
                    biofuels
                  </a>
                </li>
                <li>
                  <a class='tag' href='/tags/rss/'>
                    rss
                  </a>
                </li>
                <li>
                  <a class='tag' href='/tags/webdev/'>
                    webdev
                  </a>
                </li>
              </ul>
            </div>
            <div class='body'>
              Last night I was trying to do something that I thought would be pretty simple: display a bunch of recent weblog posts on one page. 
              
              There is a great online community of folks in the biofuels blogosphere, and this page would give a quick summary of their myriad, nerdy, wonderful events and research. 
              
              So the goal is to have the title of a weblog, followed by the most recent posts, each with the date posted and a bit of the post body. The entire web page might be called "biofuels digest," with a total of perhaps 30 weblogs. Often on the web you will see "blogrolls" that list lots of blogs, but these are usually just links to the blogs (there isn't a post excerpt) and they are almost always either hardcoded html or javascript-included from a third party like <a href="http://www.bloglines.com">Bloglines </a>(see my own blogroll on the front page). 
              
              I'd had experience with building this type of page last year, when I just wanted to have an "aggregator" page of all my most loved online reading. I ended up just slapping things around with <a href="http://magpierss.sourceforge.net/">Magpie RSS</a> (an excellent open source PHP class), and it worked fine.  Not slick, but fine. 
              
              I could have easily used a number of services that are available online for displaying other people's rss on your own page, without all the mussing with PHP. (<a href="http://www.feedburner.com/fb/a/home">Feedburner </a> or <a href="http://www.feeddigest.com/">Feed Digest </a>are services that I'd recommend for doing this type of thing, if you want to go that route.)  But who wants to mess with a bunch of javascript calls to someone else's server? And you get stuck with limits on the number of feeds you can run. <em>And </em>the there's the annoying "powered by ..." sticker at the bottom. <strong>And </strong>you'd have to use a third-party RSS splicer to combine all of your feeds.
              
              So forget all that, because this isn't just a wonky personal project -- it will hopefully end up being part of the excellent <a href="http://www.biofuels.coop/">Piedmont Biofuels</a> website -- so  it needs to be quick and hosted on the server.  
              
              So last night I opened up the latest installation of MagpieRSS and installed it on my server, created all of the necessary php for each of the blogs, and I ended up with a decent document. The major problems with this first version (using just the Magpie class) is the inconsistent treatment of the posts -- some appear and some don't -- and the improper encoding of the blogs. (I went 'round and 'round with the encoding. It's a common problem, but I couldn't get those damn posts clean.) Probably a few days in the <a href="http://sourceforge.net/mailarchive/forum.php?thread_id=9384589&forum_id=12796">Magpie listserv archives</a> at Sourceforge would clear all of this up ... but the archives are exceptionally annoying, the Magpie blog is down, and <a href="http://www.nonprofitdesign.org/biofuels/news/biofuels-aggregator1.php">the first version</a> was still surprisingly slow anyway, even with the cache working.
              
              So I found another solution, Alan Levine's <a href="http://jade.mcli.dist.maricopa.edu/feed/">Feed to JS</a>, which is built on Magpie.  This is an excellent free (and <em>libre</em>) service that has both hosted version and downloadable script. (It relies on the magpie class, but uses javascript to display the results., giving the added benefit of having an administrator's page that simplifies some of the options for display (such as the number of posts), and it yields much more compliant utf8 encoding (no more bloody diamond question marks in place of fancy quotes). 
              
              The downside: there is currently no way to "splice" all of the feeds together before running them through the javascript, so you end up calling the js file for each feed you parse. I felt sure this would make it to slow to be usable, but I think (hope) I was wrong, even with 25 blogs on the same page. I trimmed each of the blogs to display only 3 posts anyway, so at least the compiled filesize is real slim.
              
              (Actually, while I'm writing all this out, I should bother to mention that there are a hell of a <a href="http://cogdogblog.com/2005/10/12/rss-mixers/">lot of 3rd-party RSS splicers/combiners</a> ... but, again, they're all third party, and they seem to go extinct quickly: e.g. the defunct <a href="http://www.rollup.org/">rollup.org</a>. Most of these also have ads, are not free, or have limitations on the number of feeds, like feed digest. I was surprised and disappointed that I couldn't find something to install on the server that would take care of this  -- somebody please let me know if there's something reliable out there. This would allow me to combine all the posts and just run the JS once.) 
              
              So, from a programmer's view, this is a little inelegant, but the result is really consistent, and it still comes in at 8.5 seconds on 56K.  The (minimally styled) latest version is <a href="http://www.nonprofitdesign.org/biofuels/news/biofuels-aggregator3.php">here</a>.
            </div>
          </div>
      <div id='other-articles'>
            <div class='older'>
              <ul>
                <li>
                  <h3>
                    <a href='/posts/2006/2/online/focus/groups/are/getting/simple/cheap/and/pretty.html' title='Find a simple, stable, cheap platform for online nonprofit focus groups'>
                      &laquo; Online Focus Groups are Getting Simple, Cheap and Pretty
                    </a>
                  </h3>
                </li>
                <li>
                  <h3>
                    <a href='/posts/2006/2/brief/clip/from/a/great/worldchangingcom/post.html' title="LinuxChix Africa manages to shatter two stereotypes at the same time: the idea that women aren't interested in free/open source software development; and the idea that women in Africa are bound to traditional cultural roles.">
                      &laquo; Brief Clip from a Great WorldChanging.com Post
                    </a>
                  </h3>
                </li>
                <li>
                  <h3>
                    <a href='/posts/2006/2/on/teachers/moving/from/web/05/to/web/30.html' title='David Warlick posts insightfully about the uses of technology in education. Right now he seems like a pretty stressed out guy.'>
                      &laquo; On Teachers Moving from Web 0.5 to Web 3.0
                    </a>
                  </h3>
                </li>
              </ul>
            </div>
            <div class='newer'>
              <ul>
                <li>
                  <h3>
                    <a href='/posts/2006/2/free/computer/books/tutorials/and/lecture/notes.html' title="Most of the books here are just distributed online for free because they are older editions. They aren't using an Open license, except in the case of the many online tutorials that are linked here (which are typically carefully chosen, I found). ">
                      Power to the People: Free (as in Beer) O'Reilly Books and More &raquo;
                    </a>
                  </h3>
                </li>
                <li>
                  <h3>
                    <a href='/posts/2006/2/reliefweb/maps/for/humanitarian/crisis.html' title='I have a love for maps because they can be the most rich, yet easy-to-understand communication tools.'>
                      ReliefWeb Maps for Humanitarian Crisis &raquo;
                    </a>
                  </h3>
                </li>
                <li>
                  <h3>
                    <a href='/posts/2006/3/getting/real/its/not/just/an/80s/catch/phrase.html' title="I mean, I love campfire and all, but you could've at least published with lulu">
                      Getting Real: It's Not Just an 80's Catch Phrase &raquo;
                    </a>
                  </h3>
                </li>
              </ul>
            </div>
          </div>
      <div class='clear'></div>
      <div class='comments'>
            <div id='disqus_thread'></div>
            <script src='http://disqus.com/forums/unthinkingly-blog/embed.js' type='text/javascript'></script>
            <noscript>
              <a href='http://disqus.com/forums/unthinkingly-blog/?url=ref'>
                View the discussion thread
              </a>
            </noscript>
          </div>
          <!-- / disqus adds too much visual crap -->
          <style type='text/css'>
            .dsq-dc-logo {
              display: none !important; }
          </style>
      <div class='clear'></div>
    </div>
  </body>
</html>
