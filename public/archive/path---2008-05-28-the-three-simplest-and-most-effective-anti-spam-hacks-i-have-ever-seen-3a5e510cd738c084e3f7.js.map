{"version":3,"sources":["webpack:///path---2008-05-28-the-three-simplest-and-most-effective-anti-spam-hacks-i-have-ever-seen-3a5e510cd738c084e3f7.js","webpack:///./.cache/json/2008-05-28-the-three-simplest-and-most-effective-anti-spam-hacks-i-have-ever-seen.json"],"names":["webpackJsonp","1124","module","exports","data","markdownRemark","html","frontmatter","created_at","path","title","tags","pathContext"],"mappings":"AAAAA,cAAc,iBAERC,KACA,SAAUC,EAAQC,GCHxBD,EAAAC,SAAkBC,MAAQC,gBAAkBC,KAAA,g/LAA+hMC,aAAuHC,WAAA,eAAAC,KAAA,qFAAAC,MAAA,yEAAAC,MAAA,wBAAwOC","file":"path---2008-05-28-the-three-simplest-and-most-effective-anti-spam-hacks-i-have-ever-seen-3a5e510cd738c084e3f7.js","sourcesContent":["webpackJsonp([149385228557600],{\n\n/***/ 1124:\n/***/ (function(module, exports) {\n\n\tmodule.exports = {\"data\":{\"markdownRemark\":{\"html\":\"<h3>Hack zero: Switch to Gmail</h3>\\n<p>This is not a joke: Gmail is a fantastic and nearly spam-free platform. Notably, you can hook it up with a custom domain name so no one knows you are part of the Goog machine like everyone else.</p>\\n<h3>Hack one: Greylisting with Postfix on Ubuntu</h3>\\n<blockquote>A mail transfer agent using greylisting will \\\"temporarily reject\\\" any email from a sender it does not recognize. If the mail is legitimate, the originating server will most likely try again to send it later, at which time the destination will accept it. <span class=\\\"attribution\\\"><a href=\\\"http://en.wikipedia.org/wiki/Greylisting\\\">Wikipedia: Greylisting</a></span></blockquote>\\n<p>Assuming that you have your own email server, <a href=\\\"http://postgrey.schweikert.ch/\\\">greylisting</a> is genius. <a href=\\\"http://en.wikipedia.org/wiki/Greylisting\\\">Diabolically elegant</a>, really. If you run an email server (or any server that can receive email) you are probably running the Postfix MTA, in which case their is a main configuration file appropriately named main.cf. A couple of edits to this file and you are on your way. </p>\\n<p>Here's how this setup looks (not my graph but I have definitely seen this happen on production mailservers):</p>\\n<img src=\\\"/static/images/mailgraph_greylisting.jpg\\\" title=\\\"spam goes away\\\" alt=\\\" \\\" /> \\n<p>The really brilliant thing about greylisting is that it it deals with spam way before it ever reaches your inbox, which is the only way to go (I don't use any spam filtering on my mailbox. That's too late, especially from a sysadmin perspective (think of the <strike>children</strike> cycles!).</p>\\n<p>Step one: install postgrey.</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-text\\\"><code class=\\\"language-text\\\">apt-get install postgrey</code></pre>\\n      </div>\\n<p>Two: edit your main.cf file. </p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-text\\\"><code class=\\\"language-text\\\">sudo vi /etc/postfix/main.cf</code></pre>\\n      </div>\\n<p>Three: Then open it up and look for your smtpd_restrictions; add the following line:</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-text\\\"><code class=\\\"language-text\\\">check_policy_service inet:127.0.0.1:60000 </code></pre>\\n      </div>\\n<p>Four: Reload Postfix</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-text\\\"><code class=\\\"language-text\\\">/etc/init.d/postfix reload</code></pre>\\n      </div>\\n<h3>Hack 2: DNS Blocklists</h3>\\n<p>This one is even easier, requiring only an extra line (for each blocklist). The blocklists are Just put it right there in that same block in main.cf. I typically use four of them. (Each has a slightly different purpose and tolerance. Check out the sites to get a flavor for why they exist.) This one is actually my favorite — it was created by the geek premier <a href=\\\"http://en.wikipedia.org/wiki/Paul_Vixie\\\">Paul Vixie</a> and uses a <a href=\\\"http://en.wikipedia.org/wiki/DNSBL\\\">DNS lookup</a> for an extraordinarily light overhead. </p>\\n<p>Step One: </p>\\n<p>Open your main.cf file again and add these lines:</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-text\\\"><code class=\\\"language-text\\\">  reject_rbl_client list.dsbl.org,\\n  reject_rbl_client sbl.spamhaus.org,\\n  reject_rbl_client cbl.abuseat.org,\\n  reject_rbl_client dul.dnsbl.sorbs.net</code></pre>\\n      </div>\\n<p>Then reboot Postfix: </p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-bash\\\"><code class=\\\"language-bash\\\">  /etc/init.d/postfix reload</code></pre>\\n      </div>\\n<p>As with the example above you will also want to watch your mail log to make sure nothings gone wrong. </p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-bash\\\"><code class=\\\"language-bash\\\">  <span class=\\\"token function\\\">sudo</span> <span class=\\\"token function\\\">tail</span> -f /var/log/maillog</code></pre>\\n      </div>\\n<h3>Hack 3: Keep Spammers out of Your Forms</h3>\\n<p>This is really the ideal place to stop spam: before it happens. There are a bazillion ways to prove that someone is a human (CAPTCHAs ... sigh), but I think it is instead better to put the burden on the bots. </p>\\n<p>Step one:\\nAdd a hidden field to your form. </p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-html\\\"><code class=\\\"language-html\\\">  <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>textarea</span> <span class=\\\"token attr-name\\\">name</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>comment<span class=\\\"token punctuation\\\">\\\"</span></span> <span class=\\\"token attr-name\\\">class</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>hidden<span class=\\\"token punctuation\\\">\\\"</span></span><span class=\\\"token punctuation\\\">></span></span></code></pre>\\n      </div>\\n<p> Step two: </p>\\n<p>In your handler, ignore anybody that filled out that form (as robots will do). Here's a fragment in php (assumes that the presence of a errors array will prevent submissions):</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-php\\\"><code class=\\\"language-php\\\">  <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token operator\\\">!</span><span class=\\\"token function\\\">empty</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token variable\\\">$_REQUEST</span><span class=\\\"token punctuation\\\">[</span><span class=\\\"token single-quoted-string string\\\">'comment'</span><span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span> <span class=\\\"token variable\\\">$errors</span><span class=\\\"token punctuation\\\">[</span><span class=\\\"token punctuation\\\">]</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token double-quoted-string string\\\">\\\"No Spam please.\\\"</span><span class=\\\"token punctuation\\\">;</span> <span class=\\\"token punctuation\\\">}</span></code></pre>\\n      </div>\\n<p>Those are my favorites, let me know if you have any others!</p>\",\"frontmatter\":{\"created_at\":\"May 28, 2008\",\"path\":\"/2008/05/28/the-three-simplest-and-most-effective-anti-spam-hacks-i-have-ever-seen\",\"title\":\"The Three Simplest and Most Effective Anti-Spam Hacks I Have Ever Seen\",\"tags\":[\"spam\",\"code\",\"ops\"]}}},\"pathContext\":{}}\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// path---2008-05-28-the-three-simplest-and-most-effective-anti-spam-hacks-i-have-ever-seen-3a5e510cd738c084e3f7.js","module.exports = {\"data\":{\"markdownRemark\":{\"html\":\"<h3>Hack zero: Switch to Gmail</h3>\\n<p>This is not a joke: Gmail is a fantastic and nearly spam-free platform. Notably, you can hook it up with a custom domain name so no one knows you are part of the Goog machine like everyone else.</p>\\n<h3>Hack one: Greylisting with Postfix on Ubuntu</h3>\\n<blockquote>A mail transfer agent using greylisting will \\\"temporarily reject\\\" any email from a sender it does not recognize. If the mail is legitimate, the originating server will most likely try again to send it later, at which time the destination will accept it. <span class=\\\"attribution\\\"><a href=\\\"http://en.wikipedia.org/wiki/Greylisting\\\">Wikipedia: Greylisting</a></span></blockquote>\\n<p>Assuming that you have your own email server, <a href=\\\"http://postgrey.schweikert.ch/\\\">greylisting</a> is genius. <a href=\\\"http://en.wikipedia.org/wiki/Greylisting\\\">Diabolically elegant</a>, really. If you run an email server (or any server that can receive email) you are probably running the Postfix MTA, in which case their is a main configuration file appropriately named main.cf. A couple of edits to this file and you are on your way. </p>\\n<p>Here's how this setup looks (not my graph but I have definitely seen this happen on production mailservers):</p>\\n<img src=\\\"/static/images/mailgraph_greylisting.jpg\\\" title=\\\"spam goes away\\\" alt=\\\" \\\" /> \\n<p>The really brilliant thing about greylisting is that it it deals with spam way before it ever reaches your inbox, which is the only way to go (I don't use any spam filtering on my mailbox. That's too late, especially from a sysadmin perspective (think of the <strike>children</strike> cycles!).</p>\\n<p>Step one: install postgrey.</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-text\\\"><code class=\\\"language-text\\\">apt-get install postgrey</code></pre>\\n      </div>\\n<p>Two: edit your main.cf file. </p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-text\\\"><code class=\\\"language-text\\\">sudo vi /etc/postfix/main.cf</code></pre>\\n      </div>\\n<p>Three: Then open it up and look for your smtpd_restrictions; add the following line:</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-text\\\"><code class=\\\"language-text\\\">check_policy_service inet:127.0.0.1:60000 </code></pre>\\n      </div>\\n<p>Four: Reload Postfix</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-text\\\"><code class=\\\"language-text\\\">/etc/init.d/postfix reload</code></pre>\\n      </div>\\n<h3>Hack 2: DNS Blocklists</h3>\\n<p>This one is even easier, requiring only an extra line (for each blocklist). The blocklists are Just put it right there in that same block in main.cf. I typically use four of them. (Each has a slightly different purpose and tolerance. Check out the sites to get a flavor for why they exist.) This one is actually my favorite — it was created by the geek premier <a href=\\\"http://en.wikipedia.org/wiki/Paul_Vixie\\\">Paul Vixie</a> and uses a <a href=\\\"http://en.wikipedia.org/wiki/DNSBL\\\">DNS lookup</a> for an extraordinarily light overhead. </p>\\n<p>Step One: </p>\\n<p>Open your main.cf file again and add these lines:</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-text\\\"><code class=\\\"language-text\\\">  reject_rbl_client list.dsbl.org,\\n  reject_rbl_client sbl.spamhaus.org,\\n  reject_rbl_client cbl.abuseat.org,\\n  reject_rbl_client dul.dnsbl.sorbs.net</code></pre>\\n      </div>\\n<p>Then reboot Postfix: </p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-bash\\\"><code class=\\\"language-bash\\\">  /etc/init.d/postfix reload</code></pre>\\n      </div>\\n<p>As with the example above you will also want to watch your mail log to make sure nothings gone wrong. </p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-bash\\\"><code class=\\\"language-bash\\\">  <span class=\\\"token function\\\">sudo</span> <span class=\\\"token function\\\">tail</span> -f /var/log/maillog</code></pre>\\n      </div>\\n<h3>Hack 3: Keep Spammers out of Your Forms</h3>\\n<p>This is really the ideal place to stop spam: before it happens. There are a bazillion ways to prove that someone is a human (CAPTCHAs ... sigh), but I think it is instead better to put the burden on the bots. </p>\\n<p>Step one:\\nAdd a hidden field to your form. </p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-html\\\"><code class=\\\"language-html\\\">  <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>textarea</span> <span class=\\\"token attr-name\\\">name</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>comment<span class=\\\"token punctuation\\\">\\\"</span></span> <span class=\\\"token attr-name\\\">class</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>hidden<span class=\\\"token punctuation\\\">\\\"</span></span><span class=\\\"token punctuation\\\">></span></span></code></pre>\\n      </div>\\n<p> Step two: </p>\\n<p>In your handler, ignore anybody that filled out that form (as robots will do). Here's a fragment in php (assumes that the presence of a errors array will prevent submissions):</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-php\\\"><code class=\\\"language-php\\\">  <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token operator\\\">!</span><span class=\\\"token function\\\">empty</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token variable\\\">$_REQUEST</span><span class=\\\"token punctuation\\\">[</span><span class=\\\"token single-quoted-string string\\\">'comment'</span><span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span> <span class=\\\"token variable\\\">$errors</span><span class=\\\"token punctuation\\\">[</span><span class=\\\"token punctuation\\\">]</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token double-quoted-string string\\\">\\\"No Spam please.\\\"</span><span class=\\\"token punctuation\\\">;</span> <span class=\\\"token punctuation\\\">}</span></code></pre>\\n      </div>\\n<p>Those are my favorites, let me know if you have any others!</p>\",\"frontmatter\":{\"created_at\":\"May 28, 2008\",\"path\":\"/2008/05/28/the-three-simplest-and-most-effective-anti-spam-hacks-i-have-ever-seen\",\"title\":\"The Three Simplest and Most Effective Anti-Spam Hacks I Have Ever Seen\",\"tags\":[\"spam\",\"code\",\"ops\"]}}},\"pathContext\":{}}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/json-loader!./.cache/json/2008-05-28-the-three-simplest-and-most-effective-anti-spam-hacks-i-have-ever-seen.json\n// module id = 1124\n// module chunks = 149385228557600"],"sourceRoot":""}