{"version":3,"sources":["webpack:///path---2018-04-25-migrating-to-gatsby-from-middleman-ed3ee34ff5b0a9689202.js","webpack:///./.cache/json/2018-04-25-migrating-to-gatsby-from-middleman.json"],"names":["webpackJsonp","1150","module","exports","data","markdownRemark","html","frontmatter","created_at","path","title","tags","pathContext"],"mappings":"AAAAA,cAAc,iBAERC,KACA,SAAUC,EAAQC,GCHxBD,EAAAC,SAAkBC,MAAQC,gBAAkBC,KAAA,kqYAA0sTC,aAA0tFC,WAAA,iBAAAC,KAAA,iDAAAC,MAAA,qCAAAC,MAAA,yBAAmKC","file":"path---2018-04-25-migrating-to-gatsby-from-middleman-ed3ee34ff5b0a9689202.js","sourcesContent":["webpackJsonp([129228292809027],{\n\n/***/ 1150:\n/***/ (function(module, exports) {\n\n\tmodule.exports = {\"data\":{\"markdownRemark\":{\"html\":\"<p>Sometimes I think this site is just an excuse to migrate from one CMS to another. ðŸ˜›</p>\\n<p>For the last few years this content was hosted in Middleman, which is a great, stable environment for housing your words. I use Middleman a lot and had few complaints about it â€”Â I still use Middleman for a number of other sites such as <a href=\\\"http://meedan.com\\\">meedan.com</a> and <a href=\\\"http://credibilitycoaltion.org\\\">credibilitycoaltion.org</a>. </p>\\n<p>I chose Middleman because most of my projects at the time were in Ruby â€”Â now most of my projects are in React, so I've switched to a React-based static site generator: <a href=\\\"https://gatsbyjs.org\\\">GatsbyJS</a>.</p>\\n<p>It's not been a totally smooth ride for me â€”Â it's still a relatively young project (though popular) and I'm still learning a lot about javascript. But I like the puzzle of learning how to do things in such a different way. The best part is getting more experience with <a href=\\\"https://graphql.org/\\\" title=\\\"GraphQL | A query language for your API\\\">GraphQL</a>.</p>\\n<p>Moving from another markdown based blogging system is pretty easy, there are several excellent tutorials (like the one by [Emmanuel Yusufu])(<a href=\\\"https://medium.freecodecamp.org/how-to-build-a-react-and-gatsby-powered-blog-in-about-10-minutes-625c35c06481\\\">https://medium.freecodecamp.org/how-to-build-a-react-and-gatsby-powered-blog-in-about-10-minutes-625c35c06481</a>) and some official starter projects (like the one by <a href=\\\"https://github.com/gatsbyjs/gatsby-starter-blog\\\">Kyle Mathews</a>). I recommend starting with just the most basic gatsby-starter-default project and building up from there instead of taking shortcuts with one of the blog starters. Even the simplest blog starters come with numerous extra packages that create surface error for confusion, which is not really worth it when you are trying to learn a new system.</p>\\n<p>So my setup process was something like this: </p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-shell\\\"><code class=\\\"language-shell\\\">  <span class=\\\"token function\\\">npm</span> <span class=\\\"token function\\\">install</span> --global gatsby-cli\\n  gatsby new gatsby-example-site\\n  <span class=\\\"token function\\\">cd</span> gatsby-example-site\\n  <span class=\\\"token function\\\">npm</span> run develop</code></pre>\\n      </div>\\n<h3>Migrating frontmatter</h3>\\n<p>If you already have a bunch of posts, you might need to amend your frontmatter (and paths to your files) to accomodate some of gatsby's opinions (you can also adjust gatsby code to work with your existing frontmatter ... but I found it easier to write some one-liners and play along with Gatsby's preferences.)</p>\\n<h3>Moving posts into place</h3>\\n<p>Moving posts into place, in my case meant I needed to create directories based on the name of the file. In middleman the date was in the file name, but in Gatsby the date is the directory containing an index.md. </p>\\n<p>For this script to work you'll need <a href=\\\"http://ohmyz.sh\\\">zsh</a>. I like <code class=\\\"language-text\\\">zsh</code> because it has very flexible path globbing. And I use zsh's lovely <code class=\\\"language-text\\\">zmv</code>, and a tiny custom <code class=\\\"language-text\\\">mmv</code> function.</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-shell\\\"><code class=\\\"language-shell\\\">  <span class=\\\"token comment\\\">#!/usr/local/bin/zsh</span>\\n  autoload -U zmv\\n\\n  <span class=\\\"token comment\\\"># From middleman: source/2012-01-01-example-article.html.markdown</span>\\n  <span class=\\\"token comment\\\"># To gatsby: src/posts/2012-01-01-example-article/index.md</span>\\n\\n  <span class=\\\"token comment\\\"># copy the source files over </span>\\n  <span class=\\\"token function\\\">mkdir</span> -p ./tmp\\n  <span class=\\\"token function\\\">cp</span> -R <span class=\\\"token punctuation\\\">..</span>/unthinkingly.com/source/* ./tmp\\n\\n  <span class=\\\"token comment\\\"># Define 'mmv' for making directories </span>\\n  mmv<span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>mkdir -p <span class=\\\"token string\\\">\\\"<span class=\\\"token variable\\\">${2%/*}</span>/\\\"</span><span class=\\\"token punctuation\\\">;</span> <span class=\\\"token keyword\\\">echo</span> <span class=\\\"token function\\\">mv</span> -- <span class=\\\"token string\\\">\\\"<span class=\\\"token variable\\\">$1</span>\\\"</span> <span class=\\\"token string\\\">\\\"<span class=\\\"token variable\\\">$2</span>\\\"</span><span class=\\\"token punctuation\\\">;</span><span class=\\\"token punctuation\\\">}</span>\\n\\n  <span class=\\\"token comment\\\"># Make the dirs</span>\\n  zmv -P <span class=\\\"token function\\\">mmv</span> <span class=\\\"token string\\\">'./tmp/([0-9]*)(*.html.markdown)'</span> <span class=\\\"token string\\\">'./src/posts/<span class=\\\"token variable\\\">${1}</span>/index.md'</span>\\n\\n  <span class=\\\"token comment\\\"># Move the files</span>\\n  zmv <span class=\\\"token string\\\">'./tmp/([0-9]*)(*.html.markdown)'</span> <span class=\\\"token string\\\">'src/posts/<span class=\\\"token variable\\\">${1}</span>/index.md'</span>\\n\\n  <span class=\\\"token comment\\\"># Cleanup</span>\\n  <span class=\\\"token function\\\">rm</span> -rf tmp </code></pre>\\n      </div>\\n<h3>Making images work</h3>\\n<p>Here's one of the scripts I wrote to change image paths.</p>\\n<p>And on MacOS you might want to use gsed instead of regular sed (<code class=\\\"language-text\\\">brew install gsed</code>); I found it fixed a problem when inserting newlines. But Sed should work here too.</p>\\n<p class=\\\"marginalia\\\">I love that <a href=\\\"https://en.wikipedia.org/wiki/Sed\\\">Sed is from 1973</a>.</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-shell\\\"><code class=\\\"language-shell\\\">  <span class=\\\"token comment\\\">#!/usr/local/bin/zsh</span>\\n\\n  <span class=\\\"token keyword\\\">for</span> filepath <span class=\\\"token keyword\\\">in</span> src/posts/<span class=\\\"token punctuation\\\">[</span>0-9<span class=\\\"token punctuation\\\">]</span>*/**/*.md<span class=\\\"token punctuation\\\">;</span> <span class=\\\"token keyword\\\">do</span> \\n    <span class=\\\"token keyword\\\">echo</span> <span class=\\\"token variable\\\">$filepath</span>\\n    <span class=\\\"token comment\\\"># Fix the image paths</span>\\n    gsed -E -i <span class=\\\"token string\\\">'s/src=\\\"\\\\/images/src=\\\"\\\\/static\\\\/images/g'</span> <span class=\\\"token variable\\\">$filepath</span>\\n  <span class=\\\"token keyword\\\">done</span></code></pre>\\n      </div>\\n<p>I use regular html a lot in my markdown, so the paths are typical <code class=\\\"language-text\\\">src</code> attributes.</p>\\n<p>Note that my images are in the <code class=\\\"language-text\\\">static</code> directory. For better caching I might move them into the directory that contains the blog post. I guess that would require a shell script that reads the markdown file, finds the image that is being used in the file, and then get the image to snuggle up right next to the file in the same directory. ðŸ¤” Hmm. Could work. Maybe later.</p>\\n<h2>Adding path frontmatter</h2>\\n<p>Another issue was that Gatsby relies on a <code class=\\\"language-text\\\">path</code> key in the frontmatter, which again is possible to infer from the filename when using the <code class=\\\"language-text\\\">CreatePage</code> API ... but again I figured it was easiest just to play along and change it in all the files with sed.</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-shell\\\"><code class=\\\"language-shell\\\">  <span class=\\\"token comment\\\">#!/usr/local/bin/zsh</span>\\n\\n  <span class=\\\"token comment\\\"># From: [no path key in frontmatter]</span>\\n  <span class=\\\"token comment\\\"># To: path: title-of-post</span>\\n\\n  <span class=\\\"token keyword\\\">for</span> filepath <span class=\\\"token keyword\\\">in</span> src/posts/<span class=\\\"token punctuation\\\">[</span>0-9<span class=\\\"token punctuation\\\">]</span>*/**/*.md<span class=\\\"token punctuation\\\">;</span> <span class=\\\"token keyword\\\">do</span> \\n    title<span class=\\\"token operator\\\">=</span><span class=\\\"token variable\\\">${${filepath%/*}</span><span class=\\\"token comment\\\">##*/}</span>\\n    <span class=\\\"token keyword\\\">echo</span> <span class=\\\"token variable\\\">$filepath</span>\\n    gsed -E -i <span class=\\\"token string\\\">'s/status: publish/status: publish \\\\npath: \\\\/'</span><span class=\\\"token variable\\\">$title</span><span class=\\\"token string\\\">'/g'</span> <span class=\\\"token variable\\\">$filepath</span>\\n  <span class=\\\"token keyword\\\">done</span></code></pre>\\n      </div>\\n<h3>Fighting linkrot</h3>\\n<p>Because I wanted to keep the older nested style of the middleman paths (do your part to fight linkrot!) I needed to transform them into a nested style. Now that we added that <code class=\\\"language-text\\\">path</code> key, this is a matter of updating frontmatter again (no need to add more nested subdirectories.)</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-shell\\\"><code class=\\\"language-shell\\\">  <span class=\\\"token comment\\\">#!/usr/local/bin/zsh</span>\\n\\n  <span class=\\\"token comment\\\"># Update paths</span>\\n  <span class=\\\"token comment\\\"># </span>\\n  <span class=\\\"token comment\\\"># From: path: 2018-01-01-blog-post-title/</span>\\n  <span class=\\\"token comment\\\"># To: path: 2018/01/01-blog-post-title/</span>\\n\\n  <span class=\\\"token keyword\\\">for</span> filepath <span class=\\\"token keyword\\\">in</span> src/posts/<span class=\\\"token punctuation\\\">[</span>0-9<span class=\\\"token punctuation\\\">]</span>*/**/*.md<span class=\\\"token punctuation\\\">;</span> <span class=\\\"token keyword\\\">do</span> \\n    title<span class=\\\"token operator\\\">=</span><span class=\\\"token variable\\\">${${filepath%/*}</span><span class=\\\"token comment\\\">##*/}</span>\\n    <span class=\\\"token keyword\\\">echo</span> <span class=\\\"token variable\\\">$filepath</span>\\n\\n    gsed -E -i <span class=\\\"token string\\\">'s/path: \\\\/([0-9]{4})-([0-9]{2})-([0-9]{2})-(.*)/path: \\\\/\\\\1\\\\/\\\\2\\\\/\\\\3\\\\/\\\\4/'</span> <span class=\\\"token variable\\\">$filepath</span>\\n  <span class=\\\"token keyword\\\">done</span></code></pre>\\n      </div>\\n<p>Also here are some random tips that are worth noting: </p>\\n<ul>\\n<li>You need to stop and start the <code class=\\\"language-text\\\">gatsby develop</code> process every time you touch the Node APIs (in <code class=\\\"language-text\\\">gatsby-node.js</code>). </li>\\n</ul>\\n<p>Things I love about Gatsby: </p>\\n<ul>\\n<li>Writing filesystem code in javascript, then components and templates in javascript, then my <em>styles</em> in javascript with styled-components. Phew, awesome. I love staying in on language.</li>\\n<li>Working with graphql is super fun. Way better than constantly over- and over-fetching with REST APIs. Lovely that it comes with a graphql editor, graphiql, which makes it so fun to play around with the query syntax.</li>\\n<li>Performance is amazing by default. Without trying I got a 93 lighthouse score.</li>\\n</ul>\\n<p>A few things I'm a little disappointed about with Gatsby: </p>\\n<ul>\\n<li>The startup time for development mode (which is probably a full rebuild most times) is not super fast (5â€“10 seconds or so) which is a drag if you're debugging something in your <code class=\\\"language-text\\\">gatsby-node.js</code> and have to keep rebooting.</li>\\n<li>Live reloading is not totally consistent, sometimes you have to refresh the page. It's about the same flakiness I'm used to with LiveReload which is many years old. (I love live reloading in general and can't wait for it to be more consistent in our tooling.)</li>\\n<li>Error messages in the Gatsby console are not always super clear. Lots of things can go wrong if you don't know the conventions. When in doubt make sure you restart the server.</li>\\n<li>You can't use React components in markdown without some <a href=\\\"https://using-remark.gatsbyjs.org/custom-components/\\\">funky workarounds</a> ... apparently this is a kinda hard problem. There is an <a href=\\\"https://github.com/gatsbyjs/gatsby/issues/312\\\">open ticket for better Gatsby support</a> for this and it seems folks are working on react-in-js solutions in general, such as rauchg's <a href=\\\"https://spectrum.chat/thread/1021be59-2738-4511-aceb-c66921050b9a\\\">proposal for .mdx</a>. This would be really fun to drop react components into markdown prose. (Gatsby does this well with regular \\\"pages\\\" but not markdown files.)</li>\\n</ul>\\n  <p class=\\\"marginalia\\\">Prose plus interactive components makes me think of literate programming, Brett Victor's concepts around <a href=\\\"http://worrydream.com/#!/ExplorableExplanations\\\">explorable explanations</a>, and new platforms like <a href=\\\"https://beta.observablehq.com\\\">Observeable</a>.</p>\",\"frontmatter\":{\"created_at\":\"April 25, 2018\",\"path\":\"/2018/04/25/migrating-to-gatsby-from-middleman\",\"title\":\"Migrating to Gatsby from Middleman\",\"tags\":[\"js\",\"react\",\"shell\"]}}},\"pathContext\":{}}\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// path---2018-04-25-migrating-to-gatsby-from-middleman-ed3ee34ff5b0a9689202.js","module.exports = {\"data\":{\"markdownRemark\":{\"html\":\"<p>Sometimes I think this site is just an excuse to migrate from one CMS to another. ðŸ˜›</p>\\n<p>For the last few years this content was hosted in Middleman, which is a great, stable environment for housing your words. I use Middleman a lot and had few complaints about it â€”Â I still use Middleman for a number of other sites such as <a href=\\\"http://meedan.com\\\">meedan.com</a> and <a href=\\\"http://credibilitycoaltion.org\\\">credibilitycoaltion.org</a>. </p>\\n<p>I chose Middleman because most of my projects at the time were in Ruby â€”Â now most of my projects are in React, so I've switched to a React-based static site generator: <a href=\\\"https://gatsbyjs.org\\\">GatsbyJS</a>.</p>\\n<p>It's not been a totally smooth ride for me â€”Â it's still a relatively young project (though popular) and I'm still learning a lot about javascript. But I like the puzzle of learning how to do things in such a different way. The best part is getting more experience with <a href=\\\"https://graphql.org/\\\" title=\\\"GraphQL | A query language for your API\\\">GraphQL</a>.</p>\\n<p>Moving from another markdown based blogging system is pretty easy, there are several excellent tutorials (like the one by [Emmanuel Yusufu])(<a href=\\\"https://medium.freecodecamp.org/how-to-build-a-react-and-gatsby-powered-blog-in-about-10-minutes-625c35c06481\\\">https://medium.freecodecamp.org/how-to-build-a-react-and-gatsby-powered-blog-in-about-10-minutes-625c35c06481</a>) and some official starter projects (like the one by <a href=\\\"https://github.com/gatsbyjs/gatsby-starter-blog\\\">Kyle Mathews</a>). I recommend starting with just the most basic gatsby-starter-default project and building up from there instead of taking shortcuts with one of the blog starters. Even the simplest blog starters come with numerous extra packages that create surface error for confusion, which is not really worth it when you are trying to learn a new system.</p>\\n<p>So my setup process was something like this: </p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-shell\\\"><code class=\\\"language-shell\\\">  <span class=\\\"token function\\\">npm</span> <span class=\\\"token function\\\">install</span> --global gatsby-cli\\n  gatsby new gatsby-example-site\\n  <span class=\\\"token function\\\">cd</span> gatsby-example-site\\n  <span class=\\\"token function\\\">npm</span> run develop</code></pre>\\n      </div>\\n<h3>Migrating frontmatter</h3>\\n<p>If you already have a bunch of posts, you might need to amend your frontmatter (and paths to your files) to accomodate some of gatsby's opinions (you can also adjust gatsby code to work with your existing frontmatter ... but I found it easier to write some one-liners and play along with Gatsby's preferences.)</p>\\n<h3>Moving posts into place</h3>\\n<p>Moving posts into place, in my case meant I needed to create directories based on the name of the file. In middleman the date was in the file name, but in Gatsby the date is the directory containing an index.md. </p>\\n<p>For this script to work you'll need <a href=\\\"http://ohmyz.sh\\\">zsh</a>. I like <code class=\\\"language-text\\\">zsh</code> because it has very flexible path globbing. And I use zsh's lovely <code class=\\\"language-text\\\">zmv</code>, and a tiny custom <code class=\\\"language-text\\\">mmv</code> function.</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-shell\\\"><code class=\\\"language-shell\\\">  <span class=\\\"token comment\\\">#!/usr/local/bin/zsh</span>\\n  autoload -U zmv\\n\\n  <span class=\\\"token comment\\\"># From middleman: source/2012-01-01-example-article.html.markdown</span>\\n  <span class=\\\"token comment\\\"># To gatsby: src/posts/2012-01-01-example-article/index.md</span>\\n\\n  <span class=\\\"token comment\\\"># copy the source files over </span>\\n  <span class=\\\"token function\\\">mkdir</span> -p ./tmp\\n  <span class=\\\"token function\\\">cp</span> -R <span class=\\\"token punctuation\\\">..</span>/unthinkingly.com/source/* ./tmp\\n\\n  <span class=\\\"token comment\\\"># Define 'mmv' for making directories </span>\\n  mmv<span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>mkdir -p <span class=\\\"token string\\\">\\\"<span class=\\\"token variable\\\">${2%/*}</span>/\\\"</span><span class=\\\"token punctuation\\\">;</span> <span class=\\\"token keyword\\\">echo</span> <span class=\\\"token function\\\">mv</span> -- <span class=\\\"token string\\\">\\\"<span class=\\\"token variable\\\">$1</span>\\\"</span> <span class=\\\"token string\\\">\\\"<span class=\\\"token variable\\\">$2</span>\\\"</span><span class=\\\"token punctuation\\\">;</span><span class=\\\"token punctuation\\\">}</span>\\n\\n  <span class=\\\"token comment\\\"># Make the dirs</span>\\n  zmv -P <span class=\\\"token function\\\">mmv</span> <span class=\\\"token string\\\">'./tmp/([0-9]*)(*.html.markdown)'</span> <span class=\\\"token string\\\">'./src/posts/<span class=\\\"token variable\\\">${1}</span>/index.md'</span>\\n\\n  <span class=\\\"token comment\\\"># Move the files</span>\\n  zmv <span class=\\\"token string\\\">'./tmp/([0-9]*)(*.html.markdown)'</span> <span class=\\\"token string\\\">'src/posts/<span class=\\\"token variable\\\">${1}</span>/index.md'</span>\\n\\n  <span class=\\\"token comment\\\"># Cleanup</span>\\n  <span class=\\\"token function\\\">rm</span> -rf tmp </code></pre>\\n      </div>\\n<h3>Making images work</h3>\\n<p>Here's one of the scripts I wrote to change image paths.</p>\\n<p>And on MacOS you might want to use gsed instead of regular sed (<code class=\\\"language-text\\\">brew install gsed</code>); I found it fixed a problem when inserting newlines. But Sed should work here too.</p>\\n<p class=\\\"marginalia\\\">I love that <a href=\\\"https://en.wikipedia.org/wiki/Sed\\\">Sed is from 1973</a>.</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-shell\\\"><code class=\\\"language-shell\\\">  <span class=\\\"token comment\\\">#!/usr/local/bin/zsh</span>\\n\\n  <span class=\\\"token keyword\\\">for</span> filepath <span class=\\\"token keyword\\\">in</span> src/posts/<span class=\\\"token punctuation\\\">[</span>0-9<span class=\\\"token punctuation\\\">]</span>*/**/*.md<span class=\\\"token punctuation\\\">;</span> <span class=\\\"token keyword\\\">do</span> \\n    <span class=\\\"token keyword\\\">echo</span> <span class=\\\"token variable\\\">$filepath</span>\\n    <span class=\\\"token comment\\\"># Fix the image paths</span>\\n    gsed -E -i <span class=\\\"token string\\\">'s/src=\\\"\\\\/images/src=\\\"\\\\/static\\\\/images/g'</span> <span class=\\\"token variable\\\">$filepath</span>\\n  <span class=\\\"token keyword\\\">done</span></code></pre>\\n      </div>\\n<p>I use regular html a lot in my markdown, so the paths are typical <code class=\\\"language-text\\\">src</code> attributes.</p>\\n<p>Note that my images are in the <code class=\\\"language-text\\\">static</code> directory. For better caching I might move them into the directory that contains the blog post. I guess that would require a shell script that reads the markdown file, finds the image that is being used in the file, and then get the image to snuggle up right next to the file in the same directory. ðŸ¤” Hmm. Could work. Maybe later.</p>\\n<h2>Adding path frontmatter</h2>\\n<p>Another issue was that Gatsby relies on a <code class=\\\"language-text\\\">path</code> key in the frontmatter, which again is possible to infer from the filename when using the <code class=\\\"language-text\\\">CreatePage</code> API ... but again I figured it was easiest just to play along and change it in all the files with sed.</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-shell\\\"><code class=\\\"language-shell\\\">  <span class=\\\"token comment\\\">#!/usr/local/bin/zsh</span>\\n\\n  <span class=\\\"token comment\\\"># From: [no path key in frontmatter]</span>\\n  <span class=\\\"token comment\\\"># To: path: title-of-post</span>\\n\\n  <span class=\\\"token keyword\\\">for</span> filepath <span class=\\\"token keyword\\\">in</span> src/posts/<span class=\\\"token punctuation\\\">[</span>0-9<span class=\\\"token punctuation\\\">]</span>*/**/*.md<span class=\\\"token punctuation\\\">;</span> <span class=\\\"token keyword\\\">do</span> \\n    title<span class=\\\"token operator\\\">=</span><span class=\\\"token variable\\\">${${filepath%/*}</span><span class=\\\"token comment\\\">##*/}</span>\\n    <span class=\\\"token keyword\\\">echo</span> <span class=\\\"token variable\\\">$filepath</span>\\n    gsed -E -i <span class=\\\"token string\\\">'s/status: publish/status: publish \\\\npath: \\\\/'</span><span class=\\\"token variable\\\">$title</span><span class=\\\"token string\\\">'/g'</span> <span class=\\\"token variable\\\">$filepath</span>\\n  <span class=\\\"token keyword\\\">done</span></code></pre>\\n      </div>\\n<h3>Fighting linkrot</h3>\\n<p>Because I wanted to keep the older nested style of the middleman paths (do your part to fight linkrot!) I needed to transform them into a nested style. Now that we added that <code class=\\\"language-text\\\">path</code> key, this is a matter of updating frontmatter again (no need to add more nested subdirectories.)</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-shell\\\"><code class=\\\"language-shell\\\">  <span class=\\\"token comment\\\">#!/usr/local/bin/zsh</span>\\n\\n  <span class=\\\"token comment\\\"># Update paths</span>\\n  <span class=\\\"token comment\\\"># </span>\\n  <span class=\\\"token comment\\\"># From: path: 2018-01-01-blog-post-title/</span>\\n  <span class=\\\"token comment\\\"># To: path: 2018/01/01-blog-post-title/</span>\\n\\n  <span class=\\\"token keyword\\\">for</span> filepath <span class=\\\"token keyword\\\">in</span> src/posts/<span class=\\\"token punctuation\\\">[</span>0-9<span class=\\\"token punctuation\\\">]</span>*/**/*.md<span class=\\\"token punctuation\\\">;</span> <span class=\\\"token keyword\\\">do</span> \\n    title<span class=\\\"token operator\\\">=</span><span class=\\\"token variable\\\">${${filepath%/*}</span><span class=\\\"token comment\\\">##*/}</span>\\n    <span class=\\\"token keyword\\\">echo</span> <span class=\\\"token variable\\\">$filepath</span>\\n\\n    gsed -E -i <span class=\\\"token string\\\">'s/path: \\\\/([0-9]{4})-([0-9]{2})-([0-9]{2})-(.*)/path: \\\\/\\\\1\\\\/\\\\2\\\\/\\\\3\\\\/\\\\4/'</span> <span class=\\\"token variable\\\">$filepath</span>\\n  <span class=\\\"token keyword\\\">done</span></code></pre>\\n      </div>\\n<p>Also here are some random tips that are worth noting: </p>\\n<ul>\\n<li>You need to stop and start the <code class=\\\"language-text\\\">gatsby develop</code> process every time you touch the Node APIs (in <code class=\\\"language-text\\\">gatsby-node.js</code>). </li>\\n</ul>\\n<p>Things I love about Gatsby: </p>\\n<ul>\\n<li>Writing filesystem code in javascript, then components and templates in javascript, then my <em>styles</em> in javascript with styled-components. Phew, awesome. I love staying in on language.</li>\\n<li>Working with graphql is super fun. Way better than constantly over- and over-fetching with REST APIs. Lovely that it comes with a graphql editor, graphiql, which makes it so fun to play around with the query syntax.</li>\\n<li>Performance is amazing by default. Without trying I got a 93 lighthouse score.</li>\\n</ul>\\n<p>A few things I'm a little disappointed about with Gatsby: </p>\\n<ul>\\n<li>The startup time for development mode (which is probably a full rebuild most times) is not super fast (5â€“10 seconds or so) which is a drag if you're debugging something in your <code class=\\\"language-text\\\">gatsby-node.js</code> and have to keep rebooting.</li>\\n<li>Live reloading is not totally consistent, sometimes you have to refresh the page. It's about the same flakiness I'm used to with LiveReload which is many years old. (I love live reloading in general and can't wait for it to be more consistent in our tooling.)</li>\\n<li>Error messages in the Gatsby console are not always super clear. Lots of things can go wrong if you don't know the conventions. When in doubt make sure you restart the server.</li>\\n<li>You can't use React components in markdown without some <a href=\\\"https://using-remark.gatsbyjs.org/custom-components/\\\">funky workarounds</a> ... apparently this is a kinda hard problem. There is an <a href=\\\"https://github.com/gatsbyjs/gatsby/issues/312\\\">open ticket for better Gatsby support</a> for this and it seems folks are working on react-in-js solutions in general, such as rauchg's <a href=\\\"https://spectrum.chat/thread/1021be59-2738-4511-aceb-c66921050b9a\\\">proposal for .mdx</a>. This would be really fun to drop react components into markdown prose. (Gatsby does this well with regular \\\"pages\\\" but not markdown files.)</li>\\n</ul>\\n  <p class=\\\"marginalia\\\">Prose plus interactive components makes me think of literate programming, Brett Victor's concepts around <a href=\\\"http://worrydream.com/#!/ExplorableExplanations\\\">explorable explanations</a>, and new platforms like <a href=\\\"https://beta.observablehq.com\\\">Observeable</a>.</p>\",\"frontmatter\":{\"created_at\":\"April 25, 2018\",\"path\":\"/2018/04/25/migrating-to-gatsby-from-middleman\",\"title\":\"Migrating to Gatsby from Middleman\",\"tags\":[\"js\",\"react\",\"shell\"]}}},\"pathContext\":{}}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/json-loader!./.cache/json/2018-04-25-migrating-to-gatsby-from-middleman.json\n// module id = 1150\n// module chunks = 129228292809027"],"sourceRoot":""}